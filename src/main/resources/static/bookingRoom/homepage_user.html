<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LC2 Booking</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style/index.css" />
  <script src="api/index.js" defer></script>

  <script>
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö token ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    document.addEventListener('DOMContentLoaded', async () => {
      const token = localStorage.getItem('jwt_token');
      if (!token) {
        window.location.href = '/login/pages/LoginPage.html';
        return;
      }
      try {
        const res = await fetch('/api/user/profile', {
          headers: { 'Authorization': 'Bearer ' + token }
        });
        if (res.ok) {
          const data = await res.json();
          document.getElementById('userName').textContent = data.displayName || data.email;
        } else {
          window.location.href = '/login/pages/LoginPage.html';
        }
      } catch (e) {
        window.location.href = '/login/pages/LoginPage.html';
      }
    });

    // ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
    function logout() {
      localStorage.removeItem('jwt_token');
      localStorage.removeItem('user_email');
      localStorage.removeItem('is_admin');
      window.location.href = '/login/pages/LoginPage.html';
    }
  </script>

</head>
<body>
  <header class="app">
    <div class="container">
      <div class="brand-logo">
        <img src="../resource/Logo_header.png" alt="Logo" height="100" />
      </div>
      <div class="toolbar">
        <button class="icon-btn" title="‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô">üîî</button>
        <div class="chip">‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß XXX XXXXXXXXX <span style="font-size:22px">üë§</span></div>
        <button class="icon-btn" title="‡∏≠‡∏≠‡∏Å">‚û°Ô∏è</button>
      </div>
    </div>
  </header>
  <main class="main-content">
    <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ LC2</h1>
    <div class="tabs">
      <button class="tab active">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
      <button class="tab">‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°</button>
      <button class="tab">‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</button>
    </div>
    <div class="section-header">
      <div class="title-wrapper">
        <h2>‡∏´‡πâ‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ LC2</h2>
        <div class="divider"></div>
      </div>
      <div class="date-wrapper">
        <button id="dpToggle" class="date-trigger">
          <span class="date-trigger-icon">üìÖ</span>
          <span id="dpLabel">‡∏ß‡∏±‡∏ô/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏µ</span>
          <span class="date-trigger-caret">‚åÑ</span>
        </button>
        <div id="dpPanel" class="calendar-card" aria-hidden="true">
          <div class="cal-head">
            <button class="cal-nav" data-dir="-1">‚Äπ</button>
            <div class="cal-title" id="calTitle"></div>
            <button class="cal-nav" data-dir="1">‚Ä∫</button>
          </div>
          <div class="cal-dow">
            <span>SUN</span><span>MON</span><span>TUE</span><span>WED</span><span>THU</span><span>FRI</span><span>SAT</span>
          </div>
          <div class="cal-grid" id="calGrid"></div>
        </div>
      </div>
    </div>
  </main>
</body>
</html>
