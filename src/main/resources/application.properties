server.port=8080

# ---------- Database Configuration ----------
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:sqlserver://localhost:11433;databaseName=bookingDB;encrypt=true;trustServerCertificate=true}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:booking_app}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:YourStrong@Passw0rd!}

# ---------- JPA Configuration ----------
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect
spring.jpa.hibernate.ddl-auto=update

# ---------- SQL Initialization ----------
spring.sql.init.mode=always
# Only run schema/data scripts that are safe at startup (exclude parameterized query files)
spring.sql.init.schema-locations=classpath:sql/room.sql,classpath:sql/timeslot.sql
spring.sql.init.data-locations=classpath:sql/room.sql,classpath:sql/timeslot.sql
spring.sql.init.encoding=UTF-8
spring.jpa.defer-datasource-initialization=true

# ---------- Actuator ----------
management.endpoints.web.exposure.include=health

# ---------- Mail Configuration ----------
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME}
spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ---------- App Configuration ----------
app.admin.emails=${APP_ADMIN_EMAILS:}
app.otp.ttl-seconds=${APP_OTP_TTL_SECONDS:300}
app.otp.request-cooldown=${APP_OTP_COOLDOWN:60}
app.jwt.secret=${APP_JWT_SECRET:dev-temp-secret-change-me}
app.jwt.expiry-seconds=${APP_JWT_EXPIRY:86400}

# ---------- TU API ----------
app.tu.base-url=${APP_TU_BASE_URL:https://restapi.tu.ac.th/api/}
app.tu.application-key=${APP_TU_APPLICATION_KEY}

# ---------- App Mail Toggle (dev) ----------
app.mail.enabled=${APP_MAIL_ENABLED:true}

# ---------- Logging ----------
logging.level.org.springframework.security=DEBUG
